"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[568],{562:function(e,r,a){a.r(r),a.d(r,{default:function(){return y}});var t=a(861),n=a(433),s=a(439),c=a(757),o=a.n(c),u=a(791),l="UsersPage_usersSection__YErj5",i="UsersPage_wrap__ho9OE",p="UsersPage_users__3oCRY",f="UsersPage_noUsers__wdONe",d="UsersPage_loadMore__XyDx4",h="UsersPage_btnText__SAa52",m="UsersPage_mainBG__B8gSQ",_=a(243).Z.create({baseURL:"https://6478ea36362560649a2ea40e.mockapi.io/api"}),w=function(){var e=(0,t.Z)(o().mark((function e(){var r,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_.get("/users?page=1&limit=3");case 3:return r=e.sent,a=r.data,e.abrupt("return",a);case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),g=function(){var e=(0,t.Z)(o().mark((function e(r){var a,t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_.get("/users?page=".concat(r,"&limit=3"));case 3:return a=e.sent,t=a.data,e.abrupt("return",t);case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(r){return e.apply(this,arguments)}}(),b=function(){var e=(0,t.Z)(o().mark((function e(r){var a,t,n,s,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.id,t=r.subscribers,n=r.sub,e.prev=1,s=n?t-1:t+1,e.next=5,_.put("/users/".concat(a),{followers:s});case 5:return c=e.sent,e.abrupt("return",c);case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0.message);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(r){return e.apply(this,arguments)}}(),v={card:"Card_card__zQfcO",logo:"Card_logo__-ayHN",avatarWrapper:"Card_avatarWrapper__PF0uv",userName:"Card_userName__5qEdz",avatar:"Card_avatar__7FJg3",tweets:"Card_tweets__rIcWe",followers:"Card_followers__d3zvM",button:"Card_button__hEwJW",active:"Card_active__BqLM7"},A=a.p+"static/media/bg.b3d9942b3f9d5dad1ff0.png",x=a(184),N=function(e){var r=e.user,a=e.storageHandler,t=r.id,n=r.tweets,c=r.followers,o=r.avatar,l=r.user,i=(0,u.useState)((function(){var e=localStorage.getItem("subs");return!!e&&e.includes(l)})),p=(0,s.Z)(i,2),f=p[0],d=p[1],h=(0,u.useState)(c),m=(0,s.Z)(h,2),_=m[0],w=m[1];return(0,x.jsxs)("li",{className:v.card,children:[(0,x.jsx)("img",{src:A,alt:"bg",className:v.img}),(0,x.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEwAAAAWCAYAAABqgnq6AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAJ0SURBVHgB7VixbhNBEB0jjHQURsKRSBEkoEjhJi5o3FCk5psjQUNDkSYULqDISYTCSKawJTjJvOebjcabPe86kHiQeNLo9vZm93bfzbxZXW+1Wr2V/WMJe9fr9ZouB6xzjMuR7BkPxAcq2Fj+AXghjDhEFB2Lc3gijDgGac/EMbwRRoxB2mNxCo+E9WETkPZQHKJ0Ub9gX2AzaStapfYcNkz4z2E17LuOpe+R+pcgFIGPcjtcwT5p+wXslbY/SLv+be+dbHleRNiCL0LJX0Z9RK1CbcV6Ct9pYo4ZfKe6oJKUWxeBxFwlaDBuvUbMYY8qy9CfAnwlh1xKbpCFCfuwQaQxT0z70m5Q/a99dR5+5UbKwCJQGpUl4NqHatfBEvrQfJqbIBdhM0MWN/4mjME9U5TpZquaJYtpMNL2mih+Xc6H+8+yGZXbMIL/TP4OXpv2GazRfU1KJ8hFWG3aJ9KSRVLOpdWphbYZMfOI3JEZW+n4gF0IWBcBKdfbO0VuEVa3Kr0y6jY2rDrWJHylo2+b8KZAcemLA+QiLLXJihFEfYp8B6b9Q27qVIr8EjDtc9Xt3pAjzB4ZmHpMQZb7U7kpkH0VToo7N3lhnoXUDdhFyC+iCr1X5FLyJUiog1jj/kz16WfHnwWmJqOBpF3C9yuaj2wp1/GHUgYeUWpxhFyEhVO3PRosLFmqX+E5y/NJKNn0S5BVKuBXtzyD3SlKFk69OWWk4cqIaXTcgbSpFc/BvgM9dszNe7r8U4hTeFcM9f8ZMejwGemhdqdi0nPyA9GC+vc+1q3/PxC7ce5J5GN4I4wi/00cwxNhLkU+hhfC/lTk7w2/AbK0DT3l4b3DAAAAAElFTkSuQmCC",alt:"logo",className:v.logo}),(0,x.jsxs)("div",{className:v.avatarWrapper,children:[(0,x.jsx)("img",{src:o,alt:"avatar",className:v.avatar}),(0,x.jsx)("p",{className:v.userName,children:l})]}),(0,x.jsxs)("p",{className:v.tweets,children:[n," tweets"]}),(0,x.jsxs)("p",{className:v.followers,children:[_," followers"]}),(0,x.jsx)("button",{type:"button",className:f?"".concat(v.button," ").concat(v.active):v.button,onClick:function(){d((function(e){return!e})),a({creator:l,sub:f}),w((function(e){return f?e-1:e+1})),b({id:t,subscribers:c,sub:f})},children:f?"following":"follow"})]},t)},j=a(315),C="Dropdown_dropdown__5wnDN",U="Dropdown_placeholder__Qfdrd",k="Dropdown_menu__9x7jq",S="Dropdown_option__Ppp-c",Z=[{value:"show all",label:"Show all",className:"".concat(S)},{value:"follow",label:"Follow",className:"".concat(S)},{value:"followings",label:"Followings",className:"".concat(S)}],B=function(e){var r=e.onChange;return(0,x.jsx)(j.Z,{className:C,placeholderClassName:U,menuClassName:k,options:Z,onChange:function(e){return r(e.value)},placeholder:"Select an option",arrowOpen:!0})},E=a(87),J="Header_header__OKWO7",W="Header_link__qAkBV",F=function(){return(0,x.jsx)("header",{className:J,children:(0,x.jsx)(E.rU,{className:W,to:"/",children:"Back to main Page"})})},y=function(){var e=(0,u.useState)("show all"),r=(0,s.Z)(e,2),a=r[0],c=r[1],_=(0,u.useState)(1),b=(0,s.Z)(_,2),v=b[0],A=b[1],j=(0,u.useState)([]),C=(0,s.Z)(j,2),U=C[0],k=C[1],S=(0,u.useState)(JSON.parse(localStorage.getItem("subs"))||[]),Z=(0,s.Z)(S,2),E=Z[0],J=Z[1],W=function(e){var r=e.creator,a=e.sub;E.length?J((function(e){return a?(0,n.Z)(e.filter((function(e){return e!==r}))):[].concat((0,n.Z)(e),[r])})):J([r])},y=function(){var e=(0,t.Z)(o().mark((function e(){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w();case 2:return r=e.sent,e.abrupt("return",k(r));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,u.useEffect)((function(){y()}),[]),(0,u.useEffect)((function(){localStorage.setItem("subs",JSON.stringify(E))}),[E]),(0,u.useEffect)((function(){if(1!==v){var e=function(){var e=(0,t.Z)(o().mark((function e(){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g(v);case 2:return r=e.sent,e.abrupt("return",k((function(e){return[].concat((0,n.Z)(e),(0,n.Z)(r))})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}}),[v]);var L=U.length?U.filter((function(e){switch(a){case"follow":return!E.includes(e.user);case"followings":return E.includes(e.user);default:return e}})).map((function(e){return(0,x.jsx)(N,{user:e,storageHandler:W},e.id)})):(0,x.jsx)("p",{className:f,children:"There are no Users to show!"});return(0,x.jsx)(x.Fragment,{children:(0,x.jsx)("main",{className:m,children:(0,x.jsx)("section",{className:l,children:(0,x.jsxs)("div",{className:"container",children:[(0,x.jsx)("h1",{className:"visually-hidden",children:"Users List Section "}),(0,x.jsxs)("div",{className:i,children:[(0,x.jsx)(B,{onChange:c})," ",(0,x.jsx)(F,{})]}),(0,x.jsx)("ul",{className:p,children:L}),16!==L.length&&(0,x.jsx)("button",{type:"button",className:d,onClick:function(){A((function(e){return e+1}))},children:(0,x.jsx)("p",{className:h,children:"Load More"})})]})})})})}}}]);
//# sourceMappingURL=568.c734f5f3.chunk.js.map