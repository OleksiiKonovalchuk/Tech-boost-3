"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[393],{313:function(e,r,t){t.r(r),t.d(r,{default:function(){return E}});var a=t(861),n=t(433),s=t(439),c=t(757),o=t.n(c),u=t(791),l="UsersPage_usersSection__YErj5",i="UsersPage_users__3oCRY",p="UsersPage_noUsers__wdONe",f="UsersPage_loadMore__XyDx4",d="UsersPage_btnText__SAa52",h=t(243).Z.create({baseURL:"https://6478ea36362560649a2ea40e.mockapi.io/api"}),w=function(){var e=(0,a.Z)(o().mark((function e(){var r,t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.get("/users?page=1&limit=3");case 3:return r=e.sent,t=r.data,e.abrupt("return",t);case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),m=function(){var e=(0,a.Z)(o().mark((function e(r){var t,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.get("/users?page=".concat(r,"&limit=3"));case 3:return t=e.sent,a=t.data,e.abrupt("return",a);case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(r){return e.apply(this,arguments)}}(),_=function(){var e=(0,a.Z)(o().mark((function e(r){var t,a,n,s,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.id,a=r.subscribers,n=r.sub,e.prev=1,s=n?a-1:a+1,e.next=5,h.put("/users/".concat(t),{followers:s});case 5:return c=e.sent,e.abrupt("return",c);case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0.message);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(r){return e.apply(this,arguments)}}(),b={card:"Card_card__zQfcO",logo:"Card_logo__-ayHN",avatarWrapper:"Card_avatarWrapper__PF0uv",userName:"Card_userName__5qEdz",avatar:"Card_avatar__7FJg3",tweets:"Card_tweets__rIcWe",followers:"Card_followers__d3zvM",button:"Card_button__hEwJW",active:"Card_active__BqLM7"},g=t.p+"static/media/bg.b3d9942b3f9d5dad1ff0.png",v=t(184),A=function(e){var r=e.user,t=e.storageHandler,a=r.id,n=r.tweets,c=r.followers,o=r.avatar,l=r.user,i=(0,u.useState)((function(){var e=localStorage.getItem("subs");return!!e&&e.includes(l)})),p=(0,s.Z)(i,2),f=p[0],d=p[1],h=(0,u.useState)(c),w=(0,s.Z)(h,2),m=w[0],A=w[1];return(0,v.jsxs)("div",{className:b.card,children:[(0,v.jsx)("img",{src:g,alt:"bg",className:b.img}),(0,v.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEwAAAAWCAYAAABqgnq6AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAJ0SURBVHgB7VixbhNBEB0jjHQURsKRSBEkoEjhJi5o3FCk5psjQUNDkSYULqDISYTCSKawJTjJvOebjcabPe86kHiQeNLo9vZm93bfzbxZXW+1Wr2V/WMJe9fr9ZouB6xzjMuR7BkPxAcq2Fj+AXghjDhEFB2Lc3gijDgGac/EMbwRRoxB2mNxCo+E9WETkPZQHKJ0Ub9gX2AzaStapfYcNkz4z2E17LuOpe+R+pcgFIGPcjtcwT5p+wXslbY/SLv+be+dbHleRNiCL0LJX0Z9RK1CbcV6Ct9pYo4ZfKe6oJKUWxeBxFwlaDBuvUbMYY8qy9CfAnwlh1xKbpCFCfuwQaQxT0z70m5Q/a99dR5+5UbKwCJQGpUl4NqHatfBEvrQfJqbIBdhM0MWN/4mjME9U5TpZquaJYtpMNL2mih+Xc6H+8+yGZXbMIL/TP4OXpv2GazRfU1KJ8hFWG3aJ9KSRVLOpdWphbYZMfOI3JEZW+n4gF0IWBcBKdfbO0VuEVa3Kr0y6jY2rDrWJHylo2+b8KZAcemLA+QiLLXJihFEfYp8B6b9Q27qVIr8EjDtc9Xt3pAjzB4ZmHpMQZb7U7kpkH0VToo7N3lhnoXUDdhFyC+iCr1X5FLyJUiog1jj/kz16WfHnwWmJqOBpF3C9yuaj2wp1/GHUgYeUWpxhFyEhVO3PRosLFmqX+E5y/NJKNn0S5BVKuBXtzyD3SlKFk69OWWk4cqIaXTcgbSpFc/BvgM9dszNe7r8U4hTeFcM9f8ZMejwGemhdqdi0nPyA9GC+vc+1q3/PxC7ce5J5GN4I4wi/00cwxNhLkU+hhfC/lTk7w2/AbK0DT3l4b3DAAAAAElFTkSuQmCC",alt:"logo",className:b.logo}),(0,v.jsxs)("div",{className:b.avatarWrapper,children:[(0,v.jsx)("img",{src:o,alt:"avatar",className:b.avatar}),(0,v.jsx)("p",{className:b.userName,children:l})]}),(0,v.jsxs)("p",{className:b.tweets,children:[n," tweets"]}),(0,v.jsxs)("p",{className:b.followers,children:[m," followers"]}),(0,v.jsx)("button",{type:"button",className:f?"".concat(b.button," ").concat(b.active):b.button,onClick:function(){d((function(e){return!e})),t({creator:l,sub:f}),A((function(e){return f?e-1:e+1})),_({id:a,subscribers:c,sub:f})},children:f?"following":"follow"})]},a)},N=t(315),x="Dropdown_dropdown__5wnDN",j="Dropdown_control__D52Sp",C="Dropdown_placeholder__Qfdrd",S="Dropdown_menu__9x7jq",U="Dropdown_option__Ppp-c",Z=[{value:"show all",label:"Show all",className:"".concat(U)},{value:"follow",label:"Follow",className:"".concat(U)},{value:"followings",label:"Followings",className:"".concat(U)}],k=function(e){var r=e.onChange;return(0,v.jsx)(N.Z,{className:x,controlClassName:j,placeholderClassName:C,menuClassName:S,options:Z,onChange:function(e){return r(e.value)},placeholder:"Select an option",arrowOpen:!0})},E=function(){var e=(0,u.useState)("show all"),r=(0,s.Z)(e,2),t=r[0],c=r[1],h=(0,u.useState)(1),_=(0,s.Z)(h,2),b=_[0],g=_[1],N=(0,u.useState)([]),x=(0,s.Z)(N,2),j=x[0],C=x[1],S=(0,u.useState)(JSON.parse(localStorage.getItem("subs"))||[]),U=(0,s.Z)(S,2),Z=U[0],E=U[1],B=function(e){var r=e.creator,t=e.sub;Z.length?E((function(e){return t?(0,n.Z)(e.filter((function(e){return e!==r}))):[].concat((0,n.Z)(e),[r])})):E([r])},J=function(){var e=(0,a.Z)(o().mark((function e(){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w();case 2:return r=e.sent,e.abrupt("return",C(r));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,u.useEffect)((function(){J()}),[]),(0,u.useEffect)((function(){localStorage.setItem("subs",JSON.stringify(Z))}),[Z]),(0,u.useEffect)((function(){if(1!==b){var e=function(){var e=(0,a.Z)(o().mark((function e(){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m(b);case 2:return r=e.sent,e.abrupt("return",C((function(e){return[].concat((0,n.Z)(e),(0,n.Z)(r))})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}}),[b]);var W=j.length?j.filter((function(e){switch(t){case"follow":return!Z.includes(e.user);case"followings":return Z.includes(e.user);default:return e}})).map((function(e){return(0,v.jsx)(A,{user:e,storageHandler:B},e.id)})):(0,v.jsx)("p",{className:p,children:"There are no Users to show!"});return(0,v.jsx)("main",{children:(0,v.jsxs)("section",{className:l,children:[(0,v.jsx)("h1",{className:"visually-hidden",children:"Users List Section "}),(0,v.jsx)(k,{onChange:c}),(0,v.jsx)("ul",{className:i,children:W}),(0,v.jsx)("button",{type:"button",className:f,onClick:function(){g((function(e){return e+1}))},children:(0,v.jsx)("p",{className:d,children:"Load More"})})]})})}}}]);
//# sourceMappingURL=393.bb247cb2.chunk.js.map